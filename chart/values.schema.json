{
  "$schema": "https://json-schema.org/draft-07/schema#",
  "type": "object",
  "additionalProperties": true,
  "properties": {
    "global": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "nameOverride": { "type": "string" },
        "fullnameOverride": { "type": "string" },
        "labels": { "type": "object" },
        "annotations": { "type": "object" },
        "podLabels": { "type": "object" },
        "podAnnotations": { "type": "object" },
        "imagePullSecrets": { "type": "array" },
        "nodeSelector": { "type": "object" },
        "tolerations": { "type": "array" },
        "affinity": { "type": "object" },
        "podSecurityContext": { "type": "object" },
        "securityContext": { "type": "object" },
        "env": { "type": "array" },
        "envFrom": { "type": "array" },
        "volumes": { "type": "array" },
        "volumeMounts": { "type": "array" }
      }
    },
    "serviceAccount": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "create": { "type": "boolean" },
        "name": { "type": "string" },
        "annotations": { "type": "object" },
        "automountServiceAccountToken": { "type": "boolean" }
      }
    },
    "components": {
      "type": "object",
      "additionalProperties": { "$ref": "#/definitions/component" }
    },
    "externalServices": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "postgres": { "$ref": "#/definitions/externalPostgres" },
        "redis": { "$ref": "#/definitions/externalRedis" },
        "minio": { "$ref": "#/definitions/externalMinio" }
      }
    },
    "observability": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "otel": {
          "type": "object",
          "additionalProperties": true,
          "properties": {
            "enabled": { "type": "boolean" },
            "serviceName": { "type": "string" },
            "endpoint": { "type": "string" },
            "protocol": { "type": "string" },
            "headers": { "type": "string" },
            "resourceAttributes": { "type": "object" }
          }
        },
        "serviceMonitor": {
          "type": "object",
          "additionalProperties": true,
          "properties": {
            "enabled": { "type": "boolean" },
            "labels": { "type": "object" },
            "namespace": { "type": "string" }
          }
        },
        "podMonitor": {
          "type": "object",
          "additionalProperties": true,
          "properties": {
            "enabled": { "type": "boolean" },
            "labels": { "type": "object" },
            "namespace": { "type": "string" }
          }
        }
      }
    },
    "networkPolicy": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "enabled": { "type": "boolean" },
        "policyTypes": { "type": "array" },
        "ingress": { "type": "array" },
        "egress": { "type": "array" }
      }
    },
    "postgresql": { "type": "object" },
    "redis": { "type": "object" },
    "minio": { "type": "object" }
  },
  "definitions": {
    "component": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "enabled": { "type": "boolean" },
        "replicaCount": { "type": "integer", "minimum": 0 },
        "image": {
          "type": "object",
          "additionalProperties": true,
          "properties": {
            "repository": { "type": "string" },
            "tag": { "type": "string" },
            "pullPolicy": { "type": "string" }
          }
        },
        "command": { "type": "array" },
        "args": { "type": "array" },
        "ports": { "type": "array" },
        "service": { "type": "object" },
        "ingress": { "type": "object" },
        "env": { "type": "array" },
        "envFrom": { "type": "array" },
        "resources": { "type": "object" },
        "livenessProbe": { "type": "object" },
        "readinessProbe": { "type": "object" },
        "startupProbe": { "type": "object" },
        "podSecurityContext": { "type": "object" },
        "securityContext": { "type": "object" },
        "nodeSelector": { "type": "object" },
        "tolerations": { "type": "array" },
        "affinity": { "type": "object" },
        "volumes": { "type": "array" },
        "volumeMounts": { "type": "array" },
        "autoscaling": { "type": "object" },
        "pdb": { "type": "object" },
        "metrics": { "type": "object" }
      }
    },
    "externalPostgres": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "enabled": { "type": "boolean" },
        "injectEnv": { "type": "boolean" },
        "host": { "type": "string" },
        "port": { "type": "integer" },
        "database": { "type": "string" },
        "user": { "type": "string" },
        "existingSecret": { "type": "string" },
        "passwordKey": { "type": "string" },
        "urlKey": { "type": "string" }
      }
    },
    "externalRedis": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "enabled": { "type": "boolean" },
        "injectEnv": { "type": "boolean" },
        "host": { "type": "string" },
        "port": { "type": "integer" },
        "existingSecret": { "type": "string" },
        "passwordKey": { "type": "string" }
      }
    },
    "externalMinio": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "enabled": { "type": "boolean" },
        "injectEnv": { "type": "boolean" },
        "endpoint": { "type": "string" },
        "bucket": { "type": "string" },
        "region": { "type": "string" },
        "existingSecret": { "type": "string" },
        "accessKeyKey": { "type": "string" },
        "secretKeyKey": { "type": "string" }
      }
    }
  }
}
